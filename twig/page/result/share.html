{#
	Render a Lab Result
#}

{% extends "layout/html.html" %}

{% block body %}
<style>
.metric-general-wrap h2 {
	background: #343434;
	color: #fefefe;
	margin: 0 0 0.50rem 0;
	padding: 0.25rem 0.50rem;
}

.metric-general-wrap .col {
	text-align: center;
}
</style>


<div class="container mt-4">
<h1>Result: {{ Result.id }}</h1>
<h3>Sample: {{ Sample.id }}</h3>

{% include "block/product-summary.html" %}

<div class="row">
<div class="col-md-8">
	<div class="form-group">
		<label>Share Link</label>
		<div class="input-group">
			<input class="form-control" readonly value="https://{{ Site.hostname }}/share/{{ Result.id }}.html">
			<div class="input-group-append">
				<button class="btn btn-outline-secondary btn-clipcopy" data-clipboard-text="https://{{ Site.hostname }}/share/{{ Result.id }}.html" type="button"><i class="fas fa-clipboard"></i></button>
			</div>
		</div>
	</div>
</div>
<div class="col-md-4">
	<div class="form-group">
		<label>Print Link
			<span data-toggle="tooltip" data-placement="top" style="cursor:help;" title="Waiting for the Product Owner or Laboratory to upload these documents">
				<i class="fas fa-info-circle"></i>
			</span>
		</label>
		<div class="input-group">
			{% if Result.coa_file %}
				<a class="btn btn-block btn-outline-primary" href="https://{{ Site.hostname }}/share/{{ Result.id }}.pdf" target="_blank"><i class="fas fa-print"></i> Print COA</a>
			{% else %}
				{% if mine %}
					<a class="btn btn-block btn-outline-warning" href="https://{{ Site.hostname }}/result/{{ Result.id }}"><i class="fas fa-print"></i> Upload COA</a>
				{% else %}
					<div class="btn btn-block btn-outline-secondary disabled"><i class="fas fa-print"></i> Waiting for Documents</div>
				{% endif %}
			{% endif %}
		</div>
	</div>
</div>
</div>

{% include "block/potency-summary.html" %}

<hr>

<div class="metric-general-wrap" style="border: 1px solid #999; margin-bottom: 1rem;">
	{% include "coa/general.html" %}
</div>

<div class="d-flex flex-row flex-fill" style="margin-bottom: 1rem;">

	<div style="border: 1px solid #999; flex: 1 1 50%;">
	{% include "coa/cannabinoid.html" %}
	</div>

	<div style="border: 1px solid #999; flex: 1 1 50%;">
	{% include "coa/terpene-mini.html" %}
	</div>
</div>

<div class="d-flex flex-row flex-fill" style="margin-bottom: 1rem;">
	<div style="border: 1px solid #999; flex: 1 1 50%;">
		{% include "coa/solvent.html" %}
	</div>

	<div style="border: 1px solid #999; flex: 1 1 50%;">
		{% include "coa/microbe.html" %}
		{% include "coa/heavy-metal.html" %}
	</div>
</div>



<!-- <div class="form-actions">
	<button class="btn btn-outline-primary" name="a" data-toggle="modal" data-target="#modal-result-email" type="button"><i class="far fa-envelope"></i> Email</button>
	<button class="btn btn-outline-primary" data-toggle="modal" data-target="#modal-scan-qr" type="button"><i class="fas fa-qrcode"></i> QR Code</button>
	<a class="btn btn-outline-secondary" href="https://{{ Site.hostname }}/share/{{ Result.id }}.json"> JSON</a>
</div> -->

</div>

{% include "block/modal-scan-qr.html" %}
{% include "block/modal-send-email.html" %}

{% endblock %}

{% block foot_script %}
{{ parent() }}
<script>
$(function() {
	//$('div.collapse').addClass('show');
	$('#metric-wrap-cb').addClass('show');
});
</script>
<script>
var clipcopy = new ClipboardJS('.btn-clipcopy');
clipcopy.on('error', function(e) {
	alert(e);
});
clipcopy.on('success', function(e) {

	e.clearSelection();

	console.info('Action:', e.action);
	console.info('Text:', e.text);
	console.info('Trigger:', e.trigger);

	var $btn = $(e.trigger);
	$btn.tooltip({
		title: 'Copied!',
		trigger: 'manual',
	});
	$btn.tooltip('show');
	setTimeout(function() {
		$btn.tooltip('dispose');
	}, 2000);

});

var clipcopy_2 = new ClipboardJS('.btn-clipcopy', {
	container: document.getElementById('modal-scan-qr')
});
clipcopy_2.on('error', function(e) {
	alert(e);
});
clipcopy_2.on('success', function(e) {

	e.clearSelection();

	console.info('2Action:', e.action);
	console.info('2Text:', e.text);
	//console.info('2Trigger:', e.trigger);

	var $btn = $(e.trigger);
	$btn.tooltip({
		title: 'Copied!',
		trigger: 'manual',
	});
	$btn.tooltip('show');
	setTimeout(function() {
		$btn.tooltip('dispose');
	}, 2000);

});

</script>

{% endblock %}
